@model IEnumerable<Mindful.Models.Grade>
@{
    ViewBag.Title = "Grades";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="teachers-container">
    <div class="teachers-layout">
        @Html.Partial("_SidebarPartial", "Grades")

        <main class="content">
            <div class="card shadow">
                <div class="card-header">
                    <h6>Grade Records</h6>
                </div>
                <div class="card-body">
                    <div class="actions">
                        <a href="@Url.Action("Create", "Grade")" class="add-btn">+ Add Grade</a>
                        <form method="get" class="form-inline mb-3">
                            <select name="classId" class="form-control mr-2">
                                <option value="">All Classes</option>
                                @foreach (var item in (List<SelectListItem>)ViewBag.ClassFilter)
                                {
                                    <option value="@item.Value" selected="@item.Selected">@item.Text</option>
                                }
                            </select>

                            <select name="subjectId" class="form-control mr-2">
                                <option value="">All Subjects</option>
                                @foreach (var item in (List<SelectListItem>)ViewBag.SubjectFilter)
                                {
                                    <option value="@item.Value" selected="@item.Selected">@item.Text</option>
                                }
                            </select>

                            <button type="submit" class="btn btn-primary">Filter</button>
                            <a href="@Url.Action("Index", "Grade")" class="btn btn-secondary ml-2">Clear</a>
                        </form>

                    </div>

                    <div class="table-wrapper">
                        <table class="teacher-table">
                            <thead>
                                <tr>
                                    <th>Student</th>
                                    <th>Subject</th>
                                    <th>Mark</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var grade in Model)
                                {
                                    <tr>
                                        <td>@grade.StudentName</td>
                                        <td>@grade.SubjectName</td>
                                        <td>@grade.mark</td>
                                        <td style="display: flex; gap: 10px;">
                                            <a href="@Url.Action("Edit", "Grade", new { studentsid = grade.studentsid, subjectsid = grade.subjectsid })">Edit</a>
                                            <form asp-action="Delete" asp-controller="Grade" method="post" onsubmit="return confirm('Are you sure?');">
                                                <input type="hidden" name="studentsid" value="@grade.studentsid" />
                                                <input type="hidden" name="subjectsid" value="@grade.subjectsid" />
                                                <button type="submit" class="btn btn-danger delete-btn">Delete</button>
                                            </form>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
